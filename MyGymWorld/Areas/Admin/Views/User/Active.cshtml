@model AllUsersViewModel

@{
     this.ViewData["Title"] = "Active Users";
}

<link rel="stylesheet" href="~/css/admin-users.css" />

<div class="container-xl">
     <div class="table-responsive">
         <div class="table-wrapper">
             <div class="table-title">
                 <div class="row">
                     <div class="col-sm-5">
                         <h2>User <b>Management</b></h2>
                     </div>
                     <div class="col-sm-7">
                         <a asp-area="Admin" asp-controller="User" asp-action="Deleted" class="btn btn-secondary"><span>View Deleted Users</span></a>
                         <a href="#" class="btn btn-secondary"><i class="material-icons">&#xE24D;</i> <span>Export to Excel</span></a>
                     </div>
                 </div>
             </div>
             <table class="table table-striped table-hover">
                 <thead>
                     <tr>
                         <th>#</th>
                         <th>Email</th>
                         <th>Date Created</th>
                         <th>Role</th>
                         <th>Status</th>
                         <th>Action</th>
                     </tr>
                 </thead>
                 <tbody>
                    @for (int i = 0; i < Model.Users.Count; i++)
                    {
                        UserViewModel user = Model.Users[i];
                        <tr>
                            <td>@(i + 1)</td>
                            <td><a href="#">@user.Email</a></td>
                            <td>@user.CreatedOn</td>
                            <td>@user.Role</td>

                            @if(user.Role != null && @user.Role == ApplicationRoleConstants.ManagerRoleName)
                            {
                                @if (user.IsApproved)
                                {
                                   <td>
                                      <span class="status text-success">&bull;</span> Approved
                                    </td>
                                }
                                else if (user.IsRejected)
                                {
                                   <td>
                                      <span class="status text-danger">&bull;</span> Rejected
                                   </td>
                                }
                            }
                            else
                            {
                                @if (user.IsRejected)
                                {
                                    <td>
                                        <span class="status text-danger">&bull;</span> Rejected
                                    </td>
                                }
                                else
                                {
                                   <td>
                                      <span class="status text-success">&bull;</span> Active
                                   </td>
                                }
                            }
                         <td>
                                @if(user.IsApproved)
                                {
                                    <a asp-area="Admin" asp-controller="Manager" asp-action="RejectManager" asp-route-managerId="@user.ManagerId" class="disturb" title="Reject" data-toggle="tooltip">
                                        <span class="material-symbols-outlined">
                                            do_not_disturb_on
                                        </span>
                                        </a>
                                }
                                else if (user.IsRejected)
                                {
                                    <a asp-area="Admin" asp-controller="Manager" asp-action="ApproveManager" asp-route-managerId="@user.ManagerId" class="approve" title="Approve" data-toggle="tooltip">
                                        <span class="material-symbols-outlined">
                                            arrow_circle_up
                                        </span>
                                    </a>
                                }
                               
                             <a asp-area="Admin" asp-controller="User" asp-action="Delete" asp-route-userId="@user.Id" class="delete" title="Delete" data-toggle="tooltip">
                                 <i class="material-icons">&#xE5C9;</i>
                             </a>
                         </td>
                     </tr>
                    }
                 </tbody>
             </table>
             <div class="clearfix">
                 <div class="hint-text">Showing <b>5</b> out of <b>25</b> entries</div>
                 <ul class="pagination">
                     <li class="page-item disabled"><a href="#">Previous</a></li>
                     <li class="page-item"><a href="#" class="page-link">1</a></li>
                     <li class="page-item"><a href="#" class="page-link">2</a></li>
                     <li class="page-item active"><a href="#" class="page-link">3</a></li>
                     <li class="page-item"><a href="#" class="page-link">4</a></li>
                     <li class="page-item"><a href="#" class="page-link">5</a></li>
                     <li class="page-item"><a href="#" class="page-link">Next</a></li>
                 </ul>
             </div>
         </div>
     </div>
</div>


@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

<script>
        $(document).ready(function(){
            $('[data-toggle="tooltip"]').tooltip();
        });
</script>